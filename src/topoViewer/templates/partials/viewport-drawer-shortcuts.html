<!-- Shortcuts Drawer Panel -->
<div id="viewport-drawer-shortcuts"
  class="panel viewport-drawer fixed top-[4.5rem] right-[1rem] w-[320px] max-h-[calc(100vh-5rem)] z-[90] p-1"
  style="display: none;">

  <div class="p-2 pb-2 overflow-y-auto text-sm font-light space-y-2"
    style="max-height: calc(100vh - 8rem); scrollbar-width: thin;">

    <!-- Viewer Mode -->
    <div class="panel-block flex-col items-start">
      <label class="label text-sm font-semibold flex items-center mb-1">
        <i></i> Viewer Mode
      </label>
      <div class="w-full space-y-1">
        <div class="flex justify-between"><span>Select node/link</span><kbd>Left Click</kbd></div>
        <div class="flex justify-between"><span>Node actions</span><kbd>Right Click</kbd></div>
        <div class="flex justify-between"><span>Capture packets</span><kbd>Right Click + Link</kbd></div>
        <div class="flex justify-between"><span>Move nodes</span><kbd>Drag</kbd></div>
        <div class="flex justify-between"><span>Quick Item Search</span><kbd>Ctrl + F</kbd></div>
      </div>
    </div>

    <!-- Editor Mode -->
    <div class="panel-block flex-col items-start">
      <label class="label text-sm font-semibold flex items-center mb-1">
        <i></i> Editor Mode
      </label>
      <div class="w-full space-y-1">
        <div class="flex justify-between"><span>Add node</span><kbd>Shift + Click</kbd></div>
        <div class="flex justify-between"><span>Create link</span><kbd>Shift + Node</kbd></div>
        <div class="flex justify-between"><span>Delete</span><kbd>Alt + Click</kbd></div>
        <div class="flex justify-between"><span>Release from group</span><kbd>Ctrl + Click</kbd></div>
        <div class="flex justify-between"><span>Context menu</span><kbd>Right Click</kbd></div>
        <div class="flex justify-between"><span>Select all</span><kbd>Ctrl + A</kbd></div>
        <div class="flex justify-between"><span>Create group</span><kbd>G</kbd></div>
        <div class="flex justify-between"><span>Delete selected</span><kbd>Del</kbd></div>
      </div>
    </div>

    <!-- Panel Controls -->
    <div class="panel-block flex-col items-start">
      <label class="label text-sm font-semibold flex items-center mb-1">
        <i></i> Panel Controls
      </label>
      <div class="w-full space-y-1">
        <div class="flex justify-between"><span>Close panel</span><kbd>Esc</kbd></div>
        <div class="flex justify-between"><span>Submit form</span><kbd>Enter</kbd></div>
      </div>
    </div>

    <!-- Tips -->
    <div class="panel-block flex-col items-start">
      <label class="label text-sm font-semibold flex items-center mb-1">
        <i></i> Tips
      </label>
      <ul class="tips-list text-secondary space-y-1 w-full">
        <li>Use layout algorithms to auto-arrange</li>
        <li>
          Box Selection with <kbd>Shift</kbd> + <kbd>Click</kbd> â†’ press <kbd>G</kbd> (group) or <kbd>Del</kbd> (delete)
        </li>
        <li>Double-click any item to edit directly</li>
        <li>Export as image from context menu</li>
      </ul>
    </div>

  </div>
</div>

<script>
  window.showShortcutsModal = function () {
    const panel = document.getElementById('viewport-drawer-shortcuts');
    if (panel) {
      if (panel.style.display === 'block') {
        panel.style.display = 'none';
      } else {
        const aboutPanel = document.getElementById('panel-topoviewer-about');
        if (aboutPanel) aboutPanel.style.display = 'none';
        panel.style.display = 'block';
      }
    }
  };
  (function () {
    const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
    if (isMac) {
      document.querySelectorAll('#viewport-drawer-shortcuts kbd').forEach(el => {
        let text = el.textContent;
        text = text.replace(/Ctrl/g, 'Cmd');
        text = text.replace(/Alt/g, 'Option');
        el.textContent = text;
      });
    }
  })();
</script>

<!-- Inline CSS for typography + hanging indent -->
<style>
  /* Keycaps styling */
  #viewport-drawer-shortcuts kbd {
    font-size: 0.75rem;
    /* text-xs */
    font-weight: 600;
    padding: 0.1rem 0.4rem;
    border-radius: 4px;
    /* VS Code theme-aware variables */
    background: var(--vscode-keybindingLabel-background);
    border: 1px solid var(--vscode-keybindingLabel-border);
    color: var(--vscode-keybindingLabel-foreground);
    box-shadow: 0 1px 0 var(--vscode-keybindingLabel-shadow);
  }

  /* Hanging indent for tips list */
  #viewport-drawer-shortcuts .tips-list {
    list-style-type: disc;
    margin-left: 1.25rem;
    /* bullet position */
  }

  #viewport-drawer-shortcuts .tips-list li {
    padding-left: 0.5rem;
    /* space after bullet */
    text-indent: -0.5rem;
    /* wrapped lines align with text */
    margin-left: 0.5rem;
    /* overall slight indent */
    color: var(--text-primary);
  }
</style>